= Run a network report automation job

Learning to run a job in automation controller

== Lab 2 - Running the Network Automation - Report job

This challenge will walk you through using Automation controller to execute the `Network Automation - Report` you created on the 1st challenge.

== Ansible Collections

Ansible provides automation content in the form of collections.  An Ansible Collection contains modules, plugins and roles that a network engineer can use to build and customize their automation.

If you need a quick primer on what an Ansible Collection is, please refer to this https://www.youtube.com/watch?v=WOcqhk7TdYc&t=69s[YouTube Video here].

video::WOcqhk7TdYc[youtube, width=560, height=315]


== The Cisco IOS collection

For this demonstration we are going to automate against a Cisco IOS-XE router.  We need to use the Cisco IOS collection.

The FQCN (or fully qualified collection name) to use a module is: `namespace.collection.module`


So for our example it is: `cisco.ios.<module name>`

* The task is this simple:
+
[source,yaml]
----
- name: retrieve cisco facts
  cisco.ios.facts:
    gather_subset: config
    gather_network_resources: ospf
----

== Network automation begins and ends with facts

Each network resource modules can retrieve facts about that particular resource.  For example if you want to retrieve VLAN information you can return a YAML or JSON data structure from Arista, Cisco or Juniper network devices.

image::https://github.com/IPvSean/pictures_for_github/blob/master/retrieve_facts.png?raw=true[Retrieve facts]

== Data output is flexible

Ansible Automation Platform can create customized network reports with facts.

image::https://github.com/IPvSean/pictures_for_github/blob/master/create_report.png?raw=true[Create report]

== Lets get started

That is the end of of your lab briefing!

For this exercise we are going to run the automation job on Automation controller

=== Login to automation controller

* To login to automation controller select the `Automation controller WebUI` tab at the top of your screen.
+
Login with the following credentials:
+
[%autowidth.stretch,width=70%,cols="^.^a,^.^a"]
|===
| username | admin
| password | ansible123!
|===


=== Step 1 - Execute Network Automation - Network Report Job Template

* In the left navigation menu, expand *Automation Execution* and then click on *Templates*.
+
image:https://github.com/IPvSean/pictures_for_github/blob/master/job_templates.png?raw=true[Job templates]

* To execute the *Network Automation - Report* Job Template click the rocket button which incidates the launch job button: 
+
image:https://github.com/IPvSean/pictures_for_github/blob/master/launch_job.png?raw=true[Launch job]

=== Step 2 - Open Network Report

* After the Job run and completes successfully, click the *Dynamic Report* tab at the top.  Make sure to refresh the tab if you don't see any results.
+
To refresh click the image:https://github.com/IPvSean/pictures_for_github/blob/master/refresh.png?raw=true[Refresh] button

=== Step 3 - Click around the Dynamic Report

* This is a virtual Cisco IOS router so it only has a single physical interface on it.  Click around the network resources to expand the resource boxes and show more information.
+
This report is created using very simple Jinja2 templates in conjunction with the jQuery UI Accordion tool.

=== Step 4 - Optional

* Go to the *Terminal* tab and login to the cisco device.
+
[source,bash]
----
ssh cisco
----

* Configure something (your choice) and re-run the report.
+
For example:
+
[source,bash]
----
conf t
----
+
.Sample Output
----
Enter configuration commands, one per line.  End with CNTL/Z.
----
+
[source,bash]
----
router ospf 1
----
+
[source,bash]
----
  router-id 1.2.3.4
----

=== Step 5 - Verify

Click the End button below to verify the job executed.